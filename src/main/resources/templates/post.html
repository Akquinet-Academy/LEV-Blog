<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Lev-Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/post.css}"/>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;0,1000;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900;1,1000&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
          rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
<nav aria-label="main navigation" class="navbar" role="navigation">
    <div class="navbar-brand">
        <a class="navbar-item" th:href="@{../blog}">
            <img class="pen" th:src="@{/images/pen.png}" alt="pen"/>
        </a>

        <a aria-expanded="false" aria-label="menu" class="navbar-burger" data-target="navbarBasicExample" role="button">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" id="navbarBasicExample">
        <div class="navbar-start">
            <a class="navbar-item" th:href="@{../blog}">
                HOME
            </a>
            <a class="navbar-item" th:href="@{../about}">
                ABOUT US
            </a>
        </div>
    </div>


    <div class="navbar-end">
        <div class="navbar-item">
            <div class="buttons">
                <a class="button b-nav is-primary"
                   th:href="@{/signup}">
                    SIGN UP
                </a>
                <a class="button b-nav is-light" th:href="@{/login}" th:if="${username} == null">
                    LOG IN </a>

                <a class="button b-nav is-light" id="dropButton" onclick="dropDown()" th:if="${username} != null"
                   th:text="'LOGGED IN AS ' + ${#strings.toUpperCase(username)}">
                </a>
                <div class="dropdown" id="dropContent">
                    <form method="post" name="logoutForm" th:action="@{/logout}">
                        <input type="submit" value="LOGOUT"/>
                    </form>
                </div>
            </div>
        </div>
    </div>
</nav>
<br>


<p class="container is-widescreen has-text-centered">
<section class="section">
    <div class="columns" th:object="${thisPost}">
        <div class="column is-full">
            <div class="card blog  is-one-fifth-desktop">
                <div class="card-image">
                    <figure class="image is-4by3">
                        <!--                        <img class="image" th:src="@{/images/Gartenparty.jpg}" alt="Placeholder image">-->
                        <img alt="Image to illustrate blog post" th:src="*{image}">

                    </figure>
                </div>
                <div class="card-content">
                    <div class="content">
                        <h2 th:text="*{title}"></h2>
                        <br>
                        <p class="text" th:text="*{text}"></p>
                        <br>
                        <p>By: <span th:text="*{user}"></span></p>
                        <time class="datum" th:text="*{date}"></time>
                        <!--                        <time class="datum" th:text="*{prettydate}"></time>-->
                    </div>
                </div>

                <div class="card-content" th:each="comment : ${commentList}">
                    <table class="table is-striped">
                        <tr>
                            <td th:text="${comment.date}"/>
                            <!--                            <td th:text="${comment.prettydate}"/>-->
                            <td class="has-text-weight-bold" th:text="${comment.user}"/>
                        </tr>
                        <tr>
                            <td></td>
                            <td th:text="${comment.text}"/>
                        </tr>
                    </table>
                </div>

                <br>
                <div class="columns">
                    <div class="column is-full has-text-centered">
                        <a class="button b is-primary" th:href="@{/delete(postId=${thisPost.id})}" th:if="${isAdmin}"

                        >DELETE</a>
                        <!--        <a th:href="@{/newpost}" class="button b is-primary">ORDER POSTS</a>-->
                        <a class="button b is-primary">EDIT</a>
                    </div>
                </div>

                <br>

                <form method="post" th:action="@{/post/{id}/comment(id=${thisPost.id})}" th:if="${sessionUser} != null"
                      th:object="${newComment}">
                    <label>
                    <textarea class="textarea" maxlength="500" placeholder="Share your thoughts!"
                              th:field="*{text}"></textarea>
                    </label>
                    <div class="column is-full has-text-centered is-t">
                        <button class="button b is-primary" type="submit">SEND</button>
                    </div>
                </form>


            </div>
        </div>
    </div>
</section>
<footer class="footer" id="footer">
    <div class="has-text-centered has-text-black">
        <span class="icon"><a href="mailto:brights@brights.com"><i class="fas fa-envelope"></i></a> </span>
        <span class="icon"><a href="https://www.instagram.com/brights_learning/"><i class="fa-brands fa-instagram"></i></a></span>
        <span class="icon"><a href="https://www.linkedin.com/school/brights-learning/"><i
                class="fa-brands fa-linkedin"></i></a></span>
        <br>
        <span>Â© 2023 LEV-Blog</span>
    </div>
    <script>
        let content = document.getElementById("dropContent");

        function dropDown() {
            content.classList.toggle("showContent");
        }
    </script>

</footer>
</body>
</html>